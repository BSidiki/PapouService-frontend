<div class="validations-container">
  <h2>ğŸ” Validations de transactions</h2>

  <mat-form-field appearance="fill" class="filter-select">
    <mat-label>Type de transaction</mat-label>
    <mat-select [(ngModel)]="filter" (selectionChange)="onFilterChange()">
      <mat-option value="DEPOT">DÃ©pÃ´ts</mat-option>
      <mat-option value="RETRAIT">Retraits</mat-option>
    </mat-select>
  </mat-form-field>

  <div *ngIf="loading">Chargement...</div>

  <div *ngIf="!loading && transactions.length === 0" class="empty">
    Aucune transaction en attente.
  </div>

  <mat-card *ngFor="let t of transactions" class="transaction-card" [class.depot]="filter==='DEPOT'" [class.retrait]="filter==='RETRAIT'">
    <div class="header">
      <div class="who">
        <strong>Client :</strong>
        {{ t.utilisateur?.prenomUtilisateur || 'â€”' }} {{ t.utilisateur?.nomUtilisateur || '' }}
      </div>
      <span class="badge pending">â³ En attente</span>
    </div>

    <div class="grid">
      <div><strong>Montant :</strong> {{ t.montant | number:'1.0-0' }} FCFA</div>
      <div><strong>NumÃ©ro :</strong> {{ t.numeroEnvoyant }}</div>
      <div><strong>Plateforme :</strong> {{ t.optionDeTransaction }}</div>
      <div><strong>ID Plateforme :</strong> {{ getIdPlateforme(t) }}</div>
      <div><strong>Date :</strong> {{ dateOf(t) | date:'medium' }}</div>
      <!-- <div><strong>Date :</strong> {{ (t.dateDepot || t.dateRetrait) | date:'medium' }}</div> -->
      <div><strong>Pays :</strong> {{ t.pays || 'â€”' }}</div>
    </div>

    <img *ngIf="getImageSrc(t) as img" [src]="img" alt="Capture" class="thumb"/>

    <div class="actions">
      <button mat-raised-button color="primary" (click)="validerTransaction(t)">âœ… Valider</button>
      <button mat-stroked-button color="warn" (click)="rejeterTransaction(t)">âŒ Rejeter</button>
      <button mat-stroked-button color="accent" (click)="voirDetails(t)">ğŸ” DÃ©tails</button>
    </div>
  </mat-card>
</div>
